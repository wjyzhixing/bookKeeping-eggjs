{"version":3,"file":"pages_mainaction_index.chunk.js","sources":["webpack:///./.rax/pages/MainAction/Page.tsx","webpack:///./src/assets/ticket.png","webpack:///./src/pages/MainAction/index.css","webpack:///./src/pages/MainAction/index.tsx","webpack:///./src/utils/const.tsx"],"sourcesContent":["import { createElement } from 'rax';\nimport PageComponent from 'C:/bookkeeping/src/pages/MainAction';\nconst PageComponentName = PageComponent;\nexport default PageComponentName;","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607678096240\n      var cssReload = require(\"C:/bookkeeping/node_modules/_mini-css-extract-plugin@1.3.2@mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"esModule\":false,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  \n    if(module.hot) {\n      // 1607678096240\n      var cssReload = require(\"!../../../node_modules/_css-hot-loader@1.4.4@css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);;\n    }\n  ","import { createElement, useEffect, useState } from 'rax';\nimport Ticket from '@/assets/ticket.png';\nimport View from 'rax-view';\nimport Text from 'rax-text';\nimport { history } from 'rax-app';\nimport cookie from 'react-cookies'; // import { getSearchParams } from 'rax-app';\n// import axios from 'axios';\n\nimport { host } from '@/utils/const';\nimport { Button, List, Message, Avatar, Icon, Dialog, Select } from '@alifd/meet';\nimport './index.css';\nexport default function MainAction(props) {\n  const [cookies, setCookies] = useState();\n  const [dialog, setDialog] = useState<boolean>(false);\n  const [listContent, setListContent] = useState<any>([]);\n  const [itemValue, setItemValue] = useState({}); // const searchParams = getSearchParams();\n\n  const optionList = ['男', '女', ''];\n\n  const getInitialInfo = () => {\n    fetch(`${host}mainContent`, {\n      method: 'POST',\n      // credentials: 'include',\n      body: JSON.stringify({\n        userName: cookie.loadAll().username\n      }),\n      headers: new Headers({\n        Authorization: `Bearer ${cookie.loadAll().Authorization}`,\n        'Content-Type': 'application/json'\n      })\n    }).then(response => {\n      if (response.status == 401) {\n        Message.show({\n          type: 'warning',\n          title: 'You are not authorized.'\n        });\n      }\n\n      return response.json();\n    }).then(function (myJson) {\n      console.log(myJson);\n      setListContent(myJson.result);\n    });\n  };\n\n  const delInfo = item => {\n    fetch(`${host}delContent`, {\n      method: 'POST',\n      // credentials: 'include',\n      body: JSON.stringify({\n        id: item.id\n      }),\n      headers: new Headers({\n        Authorization: `Bearer ${cookie.loadAll().Authorization}`,\n        'Content-Type': 'application/json'\n      })\n    }).then(response => {\n      if (response.status == 401) {\n        Message.show({\n          type: 'warning',\n          title: 'You are not authorized.'\n        });\n      }\n\n      return response.json();\n    }).then(function (myJson) {\n      console.log(myJson);\n      getInitialInfo();\n    });\n  };\n\n  useEffect(() => {\n    setCookies(cookie.loadAll());\n    console.log(cookie.loadAll().Authorization);\n    getInitialInfo();\n  }, []);\n\n  const reduceValue = (list: Record<string, any>): number => {\n    let res: number = 0;\n    list.forEach(item => {\n      // console.log(item);\n      if (String(item['price']).slice(0, 1) === '-') {\n        res += Number(String(item['price']).slice(1));\n      }\n    });\n    return res;\n  };\n\n  const addValue = (list: Record<string, any>): number => {\n    let res: number = 0;\n    list.forEach(item => {\n      // console.log(item);\n      if (String(item['price']).slice(0, 1) !== '-') {\n        res += item.price;\n      }\n    });\n    return res;\n  };\n\n  const delContent = item => {\n    console.log(item);\n    setItemValue(item);\n    setDialog(true);\n  };\n\n  const changeContent = item => {\n    history.push(`/editPage?sex=${cookie.loadAll().sex}&price=${item.price}&content=${item.content}&id=${item.id}`);\n  };\n\n  const returnLogin = () => {\n    cookie.remove('sex');\n    cookie.remove('username');\n    cookie.remove('Authorization');\n    history.push(`/`);\n  };\n\n  const selectSingle = v => {\n    fetch(`${host}selectSingle`, {\n      method: 'POST',\n      // credentials: 'include',\n      body: JSON.stringify({\n        userName: cookie.loadAll().username,\n        sex: v\n      }),\n      headers: new Headers({\n        Authorization: `Bearer ${cookie.loadAll().Authorization}`,\n        'Content-Type': 'application/json'\n      })\n    }).then(response => {\n      if (response.status == 401) {\n        Message.show({\n          type: 'warning',\n          title: 'You are not authorized.'\n        });\n      }\n\n      return response.json();\n    }).then(function (myJson) {\n      console.log(myJson);\n      setListContent(myJson.result);\n    });\n  };\n\n  console.log(listContent);\n  return <View className=\"rax-demo-home\">\r\n      <Avatar size=\"large\" shape=\"square\" src={Ticket} />\r\n      <Text className=\"rax-demo-title\">Book Keeping Application</Text>\r\n      <View className=\"rax-demo-username\">\r\n        <Text>Hello</Text> <Text style={{\n        color: 'blue'\n      }}>{cookie.loadAll().username}</Text>\r\n      </View>\r\n      <Text className=\"rax-demo-info\">Please check your bill</Text>\r\n      <View className=\"rax-demo-username\">\r\n        <Text>支出</Text> <Text style={{\n        color: 'blue',\n        marginRight: '20rpx'\n      }}>{reduceValue(listContent)}</Text>\r\n        <Text>收入</Text> <Text style={{\n        color: 'blue',\n        marginRight: '20rpx'\n      }}>{addValue(listContent)}</Text>\r\n        <Text>结余</Text> <Text style={{\n        color: 'blue'\n      }}>{addValue(listContent) - reduceValue(listContent)}</Text>\r\n      </View>\r\n      <View>\r\n        <Select onChange={v => selectSingle(v)}>\r\n          {\n          /* {()} */\n        }\r\n          <Select.Option value={'男'}>Male Spend</Select.Option>\r\n          <Select.Option value={'女'}>Female Spend</Select.Option>\r\n          <Select.Option value={''}>All Spend</Select.Option>\r\n        </Select>\r\n      </View>\r\n      <View className=\"rax-btn-list\">\r\n        <List>\r\n          {listContent.map((item, index) => <List.Item title={item.content} description={item.time} extra={item.price} action key={item.id}>\r\n              {\n            /* <List.ItemTitle>{item.user_sex}</List.ItemTitle> */\n          }\r\n              <List.ItemAction>\r\n                <Icon name=\"delete-filling\" onClick={() => delContent(item)} />\r\n              </List.ItemAction>\r\n              <List.ItemAction>\r\n                <Icon name=\"edit\" onClick={() => changeContent(item)} />\r\n              </List.ItemAction>\r\n            </List.Item>)}\r\n        </List>\r\n      </View>\r\n      <View className=\"rax-btn\">\r\n        <Button type=\"primary\" onClick={() => history.push(`/addPage`)} style={{\n        marginRight: '20rpx'\n      }}>\r\n          增加账单\r\n        </Button>\r\n        <Button type=\"primary\" onClick={() => {\n        returnLogin();\n      }} style={{\n        marginRight: '20rpx'\n      }}>\r\n          返回登录\r\n        </Button>\r\n        <Button type=\"primary\" onClick={() => {\n        history.push(`/showStatus`);\n      }}>\r\n          消费总览\r\n        </Button>\r\n      </View>\r\n      <Dialog visible={dialog} title=\"请确认\" content=\"是否要移除此项目\" type=\"confirm\" onOk={() => {\n      setDialog(false);\n      delInfo(itemValue);\n    }} onClose={() => {\n      setDialog(false);\n    }} />\r\n    </View>;\n}","export const host = 'http://82.156.80.131:7001/'; // export const host = 'http://localhost:7001/';"],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;ACHA;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAFA;AANA;AAWA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAFA;AANA;AAWA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAPA;AAYA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAAA;AAIA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AADA;AAAA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AARA;AAaA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAKA;AAAA;AACA;AACA;AAAA;AACA;AADA;AAFA;AAOA;AAAA;AACA;AACA;AAFA;AAMA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AALA;AAOA;;;;;;;;;;;;ACzNA;AAAA;AAAA;;;;A","sourceRoot":""}